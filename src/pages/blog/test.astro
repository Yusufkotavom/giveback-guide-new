---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';

const posts = await getCollection('posts');
const sortedPosts = posts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.published.getTime() - a.data.published.getTime());
---

<MainLayout title="MDX Test Page" description="Testing MDX integration">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">MDX Content Test</h1>
    
    <div class="grid gap-6">
      {sortedPosts.map((post) => (
        <div class="border rounded-lg p-6">
          <h2 class="text-xl font-semibold mb-2">{post.data.title}</h2>
          <p class="text-gray-600 mb-2">{post.data.description}</p>
          <div class="text-sm text-gray-500">
            Published: {post.data.published.toLocaleDateString()}
          </div>
          <div class="flex flex-wrap gap-2 mt-2">
            {post.data.tags.map((tag) => (
              <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">
                {tag}
              </span>
            ))}
          </div>
        </div>
      ))}
    </div>
    
    <div class="mt-8 p-4 bg-green-50 rounded-lg">
      <h3 class="font-semibold text-green-800">âœ… MDX Integration Status</h3>
      <p class="text-green-700">
        Successfully loaded {sortedPosts.length} MDX posts from the content directory.
      </p>
    </div>
  </div>
</MainLayout>